<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API Design &#8212; pyrimidine 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=4848ba22" />
    <link rel="stylesheet" type="text/css" href="../_static/pyramid.css?v=a5b9c134" />
    <script src="../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples and Comparison of Algorithms" href="Examples.html" />
    <link rel="prev" title="Release History" href="Release%20History.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Examples.html" title="Examples and Comparison of Algorithms"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Release%20History.html" title="Release History"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyrimidine 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API Design</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="api-design">
<h1>API Design<a class="headerlink" href="#api-design" title="Link to this heading">¶</a></h1>
<section id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Link to this heading">¶</a></h2>
<p>Short introduction to modules:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">meta</span></code>: Metaclasses</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mixin</span></code>: Mixin Classes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">base</span></code>: The base classes, esp. for creating GAs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">population</span></code>: populations to implement classical GAs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chromosome</span></code>: some type of chromosomes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">multipopulation</span></code>: multi-population GAs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">individual</span></code>: individuals for GA or other EA</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">es/de/ep</span></code>: Evolutionary algorithms</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pso/ba/fa</span></code>: Swarm intelligent algorithms</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deco</span></code>: Decorators</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">utils</span></code>: Helpers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">errors</span></code>: Exceptions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">local_search/*</span></code>: Local search algorithms</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">learn/*</span></code>: Machine learning implemented by GAs</p></li>
</ul>
</section>
<section id="metaclasses">
<h2>Metaclasses<a class="headerlink" href="#metaclasses" title="Link to this heading">¶</a></h2>
<p>The metaclass <code class="docutils literal notranslate"><span class="pre">System</span></code> is defined to simulate abstract algebraic systems, which are instantiated as a set containing a set of elements, as well as operators and functions on them.</p>
<p><code class="docutils literal notranslate"><span class="pre">MetaContainer</span></code> is the super-metaclass of <code class="docutils literal notranslate"><span class="pre">System</span></code> for creating container classes.</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ParamType</span> <span class="pre">--&gt;</span> <span class="pre">MetaContainer</span> <span class="pre">--&gt;</span> <span class="pre">System</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ParamType</span> <span class="pre">--&gt;</span> <span class="pre">MetaArray</span></code></p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">MetaArray</span></code> is a compact version of <code class="docutils literal notranslate"><span class="pre">MetaContainer</span></code></p>
</section>
<section id="mixin-classes">
<h2>Mixin Classes<a class="headerlink" href="#mixin-classes" title="Link to this heading">¶</a></h2>
<p>Metaclasses define what the algorithm is, while mixin classes specify what the algorithm does.</p>
<p>The inheritance of metaclasses:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">IterativeMixin</span>  <span class="o">-</span> <span class="o">-</span> <span class="o">-&gt;</span>  <span class="n">CollectiveMixin</span>
    <span class="o">|</span>                      <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>
    <span class="n">v</span>                      <span class="n">v</span>
<span class="n">FitnessMixin</span>  <span class="o">-</span> <span class="o">-</span> <span class="o">-&gt;</span>  <span class="n">PopulationMixin</span>
</pre></div>
</div>
<section id="iterative-models-algorithms">
<h3>Iterative models/algorithms<a class="headerlink" href="#iterative-models-algorithms" title="Link to this heading">¶</a></h3>
<p>An iterative model is a mixin class implementing iterative algorithms, mainly repeating to call <code class="docutils literal notranslate"><span class="pre">transition</span></code> method.</p>
<p>Following is the core (pseudo-)code of the class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">IterativeMixin</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">evolve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">looping</span> <span class="n">by</span> <span class="n">k</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transition</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>
</div>
<p>Users could override <code class="docutils literal notranslate"><span class="pre">transition</span></code> to implement own iteration algorithms.</p>
</section>
<section id="fitness-models">
<h3>Fitness models<a class="headerlink" href="#fitness-models" title="Link to this heading">¶</a></h3>
<p>Fitness Models (<code class="docutils literal notranslate"><span class="pre">FitnessMixin</span></code>) are iterative models with fitness. The iteration in such models would be influenced by fitness.</p>
<p>Indiviudal is a fitness model in GA.</p>
</section>
<section id="population-models">
<h3>Population models<a class="headerlink" href="#population-models" title="Link to this heading">¶</a></h3>
<p>Population Models (<code class="docutils literal notranslate"><span class="pre">PopulationMixin</span></code>) are collective algorithms with fitness.</p>
</section>
</section>
<section id="basic-classes">
<h2>Basic Classes<a class="headerlink" href="#basic-classes" title="Link to this heading">¶</a></h2>
<section id="individuals">
<h3>Individuals<a class="headerlink" href="#individuals" title="Link to this heading">¶</a></h3>
<p>An individual is defined as a container of chromosomes.</p>
<p>The individual classes are inherited from <code class="docutils literal notranslate"><span class="pre">BaseIndividual</span></code>. For instance, <code class="docutils literal notranslate"><span class="pre">BinaryIndividual</span></code> is a subclass encoded by   several binary chromosomes.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">Examples</span></code> section for a simple example of binary individuals — Knapsack Problem.</p>
</section>
<section id="chromosomes">
<h3>Chromosomes<a class="headerlink" href="#chromosomes" title="Link to this heading">¶</a></h3>
<p>The chromosomes as an array of genes, could be regarded as the unit of genetic operations.  The subclass used most frequently is<code class="docutils literal notranslate"><span class="pre">BinaryChromosome</span></code>.</p>
<p>A chromosome is equivalent to an individual with only one chromosome, mathematically.</p>
</section>
<section id="populations">
<h3>Populations<a class="headerlink" href="#populations" title="Link to this heading">¶</a></h3>
<p>The population classes are inherited from <code class="docutils literal notranslate"><span class="pre">BasePopulation</span></code>. <code class="docutils literal notranslate"><span class="pre">StandardPopulation</span></code> is the standard population for GA. It is recommended to use <code class="docutils literal notranslate"><span class="pre">HOFPopulation</span></code> in most cases.</p>
<p>A population is a container of individuals, in original meaning. But It is possible to be a container of chromosomes in the view of algebra.</p>
</section>
<section id="multi-populations">
<h3>Multi-populations<a class="headerlink" href="#multi-populations" title="Link to this heading">¶</a></h3>
<p>It is useful for multi-populations GA. It is regarded as a container of populations.</p>
</section>
<section id="environment">
<h3>Environment<a class="headerlink" href="#environment" title="Link to this heading">¶</a></h3>
<p>It is designed to be the context for evolution of individuals. The aim of the class is not for numerical computing, instead for “the Skeuomorphic Design”.</p>
</section>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Link to this heading">¶</a></h2>
<section id="about-fitness">
<h3>About fitness<a class="headerlink" href="#about-fitness" title="Link to this heading">¶</a></h3>
<p>Calculating the fintess is the most frequent task in the algorithms.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_fitness()</span></code>: the basic method to calculate the fitness of the individual. The methods whose names are started with <code class="docutils literal notranslate"><span class="pre">_</span></code> always do the most dirty task.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fitness</span></code>: decorated by <code class="docutils literal notranslate"><span class="pre">property</span></code>, get the fitness of the individual/population (from the cache first then call - <code class="docutils literal notranslate"><span class="pre">_fitness</span></code> if there is a cache). The fitness of a population is the maximal fitness of the individuals in the population.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fitness</span></code>: decorated by <code class="docutils literal notranslate"><span class="pre">property</span></code>, get the fitness of the individual (from the cache first then call <code class="docutils literal notranslate"><span class="pre">_fitness</span></code> if there is a cache).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">best/mean/std_fitness</span></code>: the maximum/mean/std of the fitnesses of the individuals in a population.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_all_fitness</span></code>: get the all fitnesses</p></li>
</ul>
</section>
<section id="about-elements-individuals-in-a-population-or-populations-in-a-multi-population-community">
<h3>About elements(individuals in a population or populations in a multi-population/community)<a class="headerlink" href="#about-elements-individuals-in-a-population-or-populations-in-a-multi-population-community" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">best_element</span></code>: wrapped by <code class="docutils literal notranslate"><span class="pre">property</span></code>, equiv. to <code class="docutils literal notranslate"><span class="pre">get_best_element</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_best_element</span></code>: get the element with maximal fitness</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_best_elements</span></code>: get some elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sort/argsort</span></code>: sort the elements by fitness</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">solution</span></code>: decoding the best element</p></li>
</ul>
</section>
<section id="basic-operation">
<h3>Basic operation<a class="headerlink" href="#basic-operation" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">copy</span></code>: copy an object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">random</span></code>: class method to generate an object randomly</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">decode</span></code>: decode an individual to the real solution</p></li>
</ul>
</section>
<section id="genetic-operation">
<h3>Genetic operation<a class="headerlink" href="#genetic-operation" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">clone</span></code>: chromosome-level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate</span></code>: chromosome-level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cross</span></code>: chromosome-level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code>: population-level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mate</span></code>: population-level, cross the elements, invalid in solution-level.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">migrate</span></code>: population-level, crossover of the populations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dual</span></code>: chromosome-level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replicate</span></code>: copy then mutate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">local_search</span></code>: population-level</p></li>
</ul>
<p>Some operators defined in solution-level, i.e. only valid for individuals/populations (or chromosomes as the individuals), such as <code class="docutils literal notranslate"><span class="pre">_fitness</span></code>, some could be defined under solution-level, i.e. valid for chromosomes in an individual, such as <code class="docutils literal notranslate"><span class="pre">dual</span></code>, <code class="docutils literal notranslate"><span class="pre">cross</span></code>, <code class="docutils literal notranslate"><span class="pre">mutate</span></code>.</p>
</section>
<section id="list-like-operation">
<h3>List-like operation<a class="headerlink" href="#list-like-operation" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">append,</span> <span class="pre">extend,</span> <span class="pre">pop,</span> <span class="pre">remove</span></code> to operate the list of the elements</p>
</section>
<section id="side-effect-and-pure">
<h3>Side-effect and pure<a class="headerlink" href="#side-effect-and-pure" title="Link to this heading">¶</a></h3>
<p>Here <code class="docutils literal notranslate"><span class="pre">side-effect</span></code> means the method will change the fitness of the individual or the population. It could be ignored if you do not use the cache (to get the fitness).</p>
</section>
<section id="others">
<h3>Others<a class="headerlink" href="#others" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">set_*</span></code>/<code class="docutils literal notranslate"><span class="pre">get_*</span></code>: set/get methods, for instance, <code class="docutils literal notranslate"><span class="pre">get_all</span></code> the attributes of all individuals in a population.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set</span></code>: set attributes/methods for a class</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">save/load</span></code>: serialization/deserialization for populations/individuals</p></li>
</ul>
</section>
</section>
<section id="arguments-parameters-attributions">
<h2>Arguments/Parameters/Attributions<a class="headerlink" href="#arguments-parameters-attributions" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n_*</span></code>: number of …, such as <code class="docutils literal notranslate"><span class="pre">n_chromosomes</span></code> represents the number of the chromosomes in an individual.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*_prob</span></code>: probability</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*_rate</span></code>: e.g. <code class="docutils literal notranslate"><span class="pre">learning_rate</span></code></p></li>
</ul>
</section>
<section id="params-alias">
<h2><code class="docutils literal notranslate"><span class="pre">params</span></code>/<code class="docutils literal notranslate"><span class="pre">alias</span></code><a class="headerlink" href="#params-alias" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">params</span></code> is a dictionary of parameters for the algorithm, it could be inherited from super class by meta-programming.</p>
<p><code class="docutils literal notranslate"><span class="pre">alias</span></code> is a dictionary for alias to attributes.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">API Design</a><ul>
<li><a class="reference internal" href="#modules">Modules</a></li>
<li><a class="reference internal" href="#metaclasses">Metaclasses</a></li>
<li><a class="reference internal" href="#mixin-classes">Mixin Classes</a><ul>
<li><a class="reference internal" href="#iterative-models-algorithms">Iterative models/algorithms</a></li>
<li><a class="reference internal" href="#fitness-models">Fitness models</a></li>
<li><a class="reference internal" href="#population-models">Population models</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-classes">Basic Classes</a><ul>
<li><a class="reference internal" href="#individuals">Individuals</a></li>
<li><a class="reference internal" href="#chromosomes">Chromosomes</a></li>
<li><a class="reference internal" href="#populations">Populations</a></li>
<li><a class="reference internal" href="#multi-populations">Multi-populations</a></li>
<li><a class="reference internal" href="#environment">Environment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#methods">Methods</a><ul>
<li><a class="reference internal" href="#about-fitness">About fitness</a></li>
<li><a class="reference internal" href="#about-elements-individuals-in-a-population-or-populations-in-a-multi-population-community">About elements(individuals in a population or populations in a multi-population/community)</a></li>
<li><a class="reference internal" href="#basic-operation">Basic operation</a></li>
<li><a class="reference internal" href="#genetic-operation">Genetic operation</a></li>
<li><a class="reference internal" href="#list-like-operation">List-like operation</a></li>
<li><a class="reference internal" href="#side-effect-and-pure">Side-effect and pure</a></li>
<li><a class="reference internal" href="#others">Others</a></li>
</ul>
</li>
<li><a class="reference internal" href="#arguments-parameters-attributions">Arguments/Parameters/Attributions</a></li>
<li><a class="reference internal" href="#params-alias"><code class="docutils literal notranslate"><span class="pre">params</span></code>/<code class="docutils literal notranslate"><span class="pre">alias</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Release%20History.html"
                          title="previous chapter">Release History</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Examples.html"
                          title="next chapter">Examples and Comparison of Algorithms</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/source/API Design.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Examples.html" title="Examples and Comparison of Algorithms"
             >next</a> |</li>
        <li class="right" >
          <a href="Release%20History.html" title="Release History"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyrimidine 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API Design</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2023, William Song.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>